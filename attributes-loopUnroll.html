<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Specifying Attribute For Unrolling Loops</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
</head>
<body id="AttributesofBlocksandControl-Flow-Statements" class="article">
<div id="header">
<h1>Specifying Attribute For Unrolling Loops</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Specifying Attribute For Unrolling Loops.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>__attribute__((opencl_unroll_hint))

__attribute__((opencl_unroll_hint(n)))</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description">Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code><em>attribute</em>opencl_unroll_hint</code> and <code><em>attribute</em>opencl_unroll_hint(n)</code> attribute qualifiers can be used to specify that a loop (<code>for</code>, <code>while</code> and <code>do</code> loops) can be unrolled.
This attribute qualifier can be used to specify full unrolling or partial unrolling by a specified amount.
This is a compiler hint and the compiler may ignore this directive.</p>
</div>
<div class="paragraph">
<p><code>n</code> is the loop unrolling factor and must be a positive integral compile time constant expression.
An unroll factor of 1 disables unrolling.
If <code>n</code> is not specified, the compiler determines the unrolling factor for the loop.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code><em>attribute</em>opencl_unroll_hint(n)</code> attribute qualifier must appear immediately before the loop to be affected.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example1">Examples</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>__attribute__((opencl_unroll_hint(2)))
while (*s != 0)
    *p++ = *s++;</pre>
</div>
</div>
<div class="paragraph">
<p>This tells the compiler to unroll the above while loop by a factor of 2.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>__attribute__((opencl_unroll_hint))
for (int i=0; i&lt;2; i++)
{
    …
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the compiler will determine how much to unroll the loop.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>__attribute__((opencl_unroll_hint(1)))
for (int i=0; i&lt;32; i++)
{
    …
}</pre>
</div>
</div>
<div class="paragraph">
<p>The above is an example where the loop should not be unrolled.</p>
</div>
<div class="paragraph">
<p>Below are some examples of invalid usage of <code><em>attribute</em>opencl_unroll_hint(n)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>__attribute__((opencl_unroll_hint(-1)))
while (…)
{
    …
}</pre>
</div>
</div>
<div class="paragraph">
<p>The above example is an invalid usage of the loop unroll factor as the loop unroll factor is negative.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>__attribute__((opencl_unroll_hint))
if (…)
{
    …
}</pre>
</div>
</div>
<div class="paragraph">
<p>The above example is invalid because the unroll attribute qualifier is used on a non-loop construct.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kernel void
my_kernel( … )
{
    int x;
    __attribute__((opencl_unroll_hint(x))
    for (int i=0; i&lt;x; i++)
    {
        …
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>The above example is invalid because the loop unroll factor is not a compile-time constant expression.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seealso">Also see</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="attribute.html"><code><em>attribute</em></code></a>, <a href="attributes-types.html">Type Attributes</a>, <a href="attributes-variables.html">Variable Attributes</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specification">Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.khronos.org/registry/cl/specs/opencl-2.0-openclc.pdf#page=61" target="_blank">OpenCL 2.0 C Language Specification, page 61</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright">Copyright</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="copyright.html">Copyright &#169; 2007-2017 The Khronos Group Inc.</a></p>
</div>
</div>
</div>
</div>
</body>
</html>